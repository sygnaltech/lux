{
  "version": 3,
  "sources": ["../src/page/clinic.ts", "../src/page/services.ts", "../src/routeDispatcher.ts", "../src/services/booking/timely.ts", "../src/site.ts", "../src/version.ts", "../src/index.ts"],
  "sourcesContent": ["\n/*\n * SITE \n * Page | Clinic \n * \n */\n\n// import { TocFix } from \"../tocfix\";\n// import Plyr from 'plyr';\n// // import QRCode from 'qrcode';\n// import { AdjustTrackingUrl } from \"../adjust\";\n// import { AdjustTrackingQr } from \"../adjust-qr\";\n\n//const url: string = 'https://www.sygnal.com?thisisatrackingurlthsfdsfsdsdatdoesstuff';\n\n\nexport class ClinicPage {\n\n    constructor() {\n    }\n    \n    init() {\n\n        /**\n         * Fix links for the ToC \n         */\n\n        // let tocFix = new TocFix();\n        // tocFix.init(); \n\n//         window['fsAttributes'] = window['fsAttributes'] || [];\n//         window['fsAttributes'].push([\n//           'toc',\n//           (tableInstances) => {\n\n//             tocFix.addToCCloseLinks();\n\n// //            console.log('toc Successfully loaded!');\n//           },\n//         ]);\n\n//         /**\n//          * Wire up components embedded\n//          * in Finsweet PRT RTB's\n//          */\n\n//         window['fsAttributes'] = window['fsAttributes'] || []; \n//         window['fsAttributes'].push([  \n//           'richtext',   \n//           (textInstances) => {   \n\n//             this.initAfterFsPRTLib();\n// //            console.log('richtext Successfully loaded!');      \n//           },   \n//         ]);    \n\n\n        // // Look for all links with a [code] attribute\n        // // and apply it to the link's querystring as ?code=VALUE. \n\n        // // Get all links with the 'code' attribute\n        // const links: NodeListOf<HTMLAnchorElement> = document.querySelectorAll('a[code]');\n\n        // links.forEach((link: HTMLAnchorElement) => {\n        //     // Get the value of the 'code' attribute\n        //     const codeValue: string = link.getAttribute('code') || '';\n\n        //     // Use the URL interface to handle the href\n        //     const url: URL = new URL(link.href);\n            \n        //     // Use URLSearchParams to set the code parameter\n        //     url.searchParams.set('code', codeValue);\n\n        //     // Update the link href\n        //     link.href = url.toString();\n        // });\n                    \n    }\n\n}  \n\n    \n    \n    \n    ", "\n/*\n * SITE \n * Page | Services \n * \n */\n\nimport { WindowData } from \"../../types/global\";\n\n// import { TocFix } from \"../tocfix\";\n// import Plyr from 'plyr';\n// // import QRCode from 'qrcode';\n// import { AdjustTrackingUrl } from \"../adjust\";\n// import { AdjustTrackingQr } from \"../adjust-qr\";\n\n//const url: string = 'https://www.sygnal.com?thisisatrackingurlthsfdsfsdsdatdoesstuff';\n\n// interface WindowData {\n//     timely_categoryId: string;\n//     timely_productId: string;\n//     sbm_categoryId: string;\n//   }\n  \n//   // Extend the Window interface to include the data property\n//   interface Window {\n//     data: WindowData;\n//   }\n\n  declare function timelyButton(company: string, options: object): void;\n\n//   declare global {\n//     interface Window {\n//         data: WindowData;\n//     }\n// }\n\ndeclare global {\n    interface Window {\n        data: WindowData;\n    }\n}\n\nexport class ServicesPage {\n\n    constructor() {\n    }\n    \n    init() {\n\n        // await loadTimelyScript('//book.gettimely.com/widget/book-button-v1.5.js');\n\n        if (!window.data) {\n            console.error (\"Window.data is not available.\");\n            return;\n        }\n\nconsole.log(\"setting up buttons\")\n\n// Timely\nvar bookingButtonInClinic = new timelyButton('ponsonbydoctors', {\n    // \"location\": \"247844\", \n    \"category\": window.data.timely_categoryId,\n    \"dontCreateButton\": true\n  });  \n\n  var bookingButtonInClinicService = new timelyButton('ponsonbydoctors', {\n    // \"location\": \"247844\", \n    \"category\": window.data.timely_categoryId,\n    \"product\": window.data.timely_productId,\n    \"dontCreateButton\": true\n  });  \n\n  var bookingButtonOnline = new timelyButton('ponsonbydoctors', {\n    // \"location\": \"247844\", \n    \"category\": \"\", // TimelyCategoryIDOnline\n    \"dontCreateButton\": true\n  });         \n\n  var bookingButtonOnlineService = new timelyButton('ponsonbydoctors', {\n    // \"location\": \"247844\", \n    \"category\": \"\", // TimelyCategoryIDOnline\n    \"product\": \"\", // TimelyServiceIDOnline\n    \"dontCreateButton\": true\n  });      \n                 \n  \n\n// Add click event listener to elements with attribute [timely=\"book\"]\nthis.addEventListeners('*[timely=\"book\"]', 'click', function (this: HTMLElement, e: Event) {\n    const categoryId = this.getAttribute('categoryId');\n    const serviceId = this.getAttribute('serviceId');\n    \n    const bookingButton = new timelyButton('ponsonbydoctors', {\n      category: categoryId,\n      service: serviceId,\n      dontCreateButton: true\n    });\n  \n    bookingButton.start();\n  });\n  \n  // Add click event listener to elements with attribute [timely=\"ponsonby\"]\n  this.addEventListeners('*[timely=\"ponsonby\"]', 'click', function () {\n    bookingButtonInClinic.start();\n  });\n  \n  // Add click event listener to elements with attribute [timely=\"ponsonby-service\"]\n  this.addEventListeners('*[timely=\"ponsonby-service\"]', 'click', function () {\n    bookingButtonInClinicService.start();\n  });\n  \n  // Add click event listener to elements with attribute [timely=\"online\"]\n  this.addEventListeners('*[timely=\"online\"]', 'click', function () {\n    bookingButtonOnline.start();\n  });\n  \n  // Add click event listener to elements with attribute [timely=\"online-service\"]\n  this.addEventListeners('*[timely=\"online-service\"]', 'click', function () {\n    bookingButtonOnlineService.start();\n  });\n  \n  // Auto-booking based on URL parameter\n  if (window.location.search.includes('action=book')) {\n    bookingButtonInClinic.start();\n  }\n\n\n\n\n    }\n\n// Utility function to add event listeners to elements\n addEventListeners(selector: string, event: string, handler: (e: Event) => void) {\n  const elements = document.querySelectorAll(selector);\n  elements.forEach(element => {\n    element.addEventListener(event, handler);\n  });\n}\n}  \n\n    \n    \n    \n    ", "/*\n * RISE\n * Main entry point\n * \n */\n\ntype RouteHandler = () => void;\n\nexport interface Routes {\n    [path: string]: RouteHandler;\n}\n\nconst routes: Routes = {\n    '/': () => {\n        console.log('This is the homepage.');\n        // Your function for the homepage\n    },\n    '/about': () => {\n        console.log('This is the about page.');\n        // Your function for the about page\n    },\n    '/contact': () => {\n        console.log('This is the contact page.');\n        // Your function for the contact page\n    },\n    // ... add more routes as needed\n};\n\nexport class RouteDispatcher {\n\n    routes: Routes;\n\n    constructor() {\n//        this.routes = {};\n    }\n\n    matchRoute(path: string): RouteHandler | null {\n        for (const route in this.routes) {\n            if (route.endsWith('*')) {\n                // If the route ends with *, treat it as a wildcard\n                const baseRoute = route.slice(0, -1); // Remove the * from the end\n                if (path.startsWith(baseRoute)) {\n                    return this.routes[route];\n                }\n            } else if (route === path) {\n                // Exact match\n                return this.routes[route];\n            }\n        }\n        return null; // No matching route found\n    }\n    \n    dispatchRoute() {\n        const path = window.location.pathname;\n        const handler = this.matchRoute(path);\n        if (handler) {\n            handler();\n        } else {\n            console.log('No specific function for this path.');\n            // Default function or behavior for unspecified paths\n        }\n    }\n    \n    \n}", "\n\nexport class TimelyService {\n\n  constructor() {\n  }\n  \n  async init() {\n\n    console.log(\"adding timely script\")\n    await this.loadTimelyScript(); \n\n  }\n\n  private loadTimelyScript(): Promise<void> {\n\n    return new Promise((resolve, reject) => {\n      const script = document.createElement('script');\n      script.src = \"//book.gettimely.com/widget/book-button-v1.3.js\";\n      script.id = 'timelyScript';\n      script.onload = () => resolve();\n      script.onerror = () => reject(new Error(`Failed to load script: ${script.src}`));\n      document.head.appendChild(script);\n    });\n  }\n  \n}\n\n", "\n/*\n * SITE \n * Site-wide Code \n * \n */\n\n\n\nexport class Site {\n\n    constructor() {\n    }\n    \n    init() {\n\n        this.addActionToBookLinks();\n                    \n    }\n\n    // Function to add ?action=book to elements with the [pd-book] attribute\n    addActionToBookLinks(): void {\n        // Select all elements with the [pd-book] attribute\n        const bookElements = document.querySelectorAll('[pd-book]') as NodeListOf<HTMLAnchorElement>;\n    \n        // Iterate over the selected elements\n        bookElements.forEach(element => {\n        const currentHref = element.getAttribute('href');\n        if (currentHref) {\n            // Update the href attribute with the new query parameter\n            element.setAttribute('href', `${currentHref}?action=book`);\n        }\n        });\n    }\n  \n}  \n\n    \n/*\nold code\n\n// Define the lookup table for locales and their corresponding path prefixes\nconst localePaths = {\n    \"en\": \"\", // Assuming \"en\" is the primary locale and has no prefix\n    \"zh\": \"/zh\", // Example for Chinese\n    // Add more locales and their prefixes as needed\n};  \n  \n// Function to determine the current page's locale\nfunction getCurrentLocale() {\n    return document.documentElement.lang || \"en\"; // Default to \"en\" if no lang attribute is found\n}  \n  \n// Function to update the href attributes for links with the custom attribute \"wfu-local-url\"\nfunction updateLinksForLocale() {\n    const currentLocale = getCurrentLocale();\n  \n  console.log(currentLocale)\n  \n    const pathPrefix = localePaths[currentLocale] || \"\"; // Default to empty string if the locale is not found in the lookup table\n    \n   console.log(pathPrefix)\n  \n    // Find all links with the custom attribute \"wfu-local-url\"\n    const links = document.querySelectorAll('a[wfu-locale-url]');\n    \n    links.forEach(link => {\n        // Prepend the pathPrefix to the href attribute, if it's not already there\n        if (!link.href.startsWith(pathPrefix)) {\n            // Ensure to handle absolute URLs correctly\n            // Extract the base URL if the href is absolute, and then prepend the pathPrefix\n            const baseUrl = link.href.replace(window.location.origin, \"\");\n            link.href = `${window.location.origin}${pathPrefix}${baseUrl}`;\n        }\n    });\n}  \n  \n// Call updateLinksForLocale to update links as soon as the script runs\nupdateLinksForLocale();  \n  \n  \n//   $(\"[wfu-query]\").each(function() {\n//     console.log($(this).attr(\"href\"));\n//     const url = new URL($(this).attr(\"href\"),\n//                        window.location.origin\n//                        );\n    \n//     const params = url.searchParams;\n//     const newParams = new URLSearchParams($(this).attr(\"wfu-query\"));\n    \n//     console.log(params.toString());\n//     console.log(newParams.toString());\n    \n//   });\n  \n  \n});\n\n// Google Tag Manager Tracking\n$(\"[wfu-gtm-event]\").click(function() {\n  console.debug('Button clicked - GTM tracking');\n  var data = {\n    'event': $(this).attr('wfu-gtm-event')\n  };\n\n  // Find GTM Event attributes\n  // and add to dataLayer\n  const dataLayerAttrPrefix = \"wfu-gtm-event-\";\n  $.each(this.attributes, function() {\n       console.debug(`attr ${this.name}`); \n    \n     if(this.name.startsWith(dataLayerAttrPrefix)) {\n       var dataLayerVar = this.name.substring(dataLayerAttrPrefix.length);\n       console.debug(`wfu-attr ${dataLayerVar} ${this.value}`); \n       data[dataLayerVar] = this.value;\n      }\n   });\n  \n  dataLayer.push(data);\n  console.log(JSON.stringify(data,null,3));\n  \n});\n*/    ", "export const VERSION = \"0.1.2\"; ", "/*\n * SITE\n * Main entry point\n * \n */\n\nimport { ClinicPage } from \"./page/clinic\";\nimport { ServicesPage } from \"./page/services\";\nimport { RouteDispatcher } from \"./routeDispatcher\";\nimport { TimelyService } from \"./services/booking/timely\";\nimport { Site } from \"./site\";\nimport { VERSION } from \"./version\";\n\n// Global vars\nconst SITE_NAME = 'Site';\n//const VERSION = 'v0.1.8';\n\n// Global Site object\n// window['Site'] = window['Site'] || {}; \n// var Site = window['Site'];\n\n\n// declare global {\n//     interface Window {\n//         data: WindowData;\n//     }\n// }\n\n\nconst init = async() => {\n    \n    console.log(`%c${SITE_NAME} package init ${VERSION}`, \"color: blue;\");\n    // console.log(\"%c\uD83D\uDCF6 Signal Site Engine: Initialization complete\", \"color: blue; background: url('https://assets.sygnal.com/https://cdn.prod.website-files.com/59b8d49f7fdf9700017d780f/59b8d57a646143000180fcca_sygnal-logo-small.png') no-repeat left center; padding-left: 20px;\");\n    // console.log(\"%c\uD83D\uDCF6 Signal Site Engine: Initialization complete\", \"color: blue; background: url('https://assets.sygnal.com/https://cdn.prod.website-files.com/59b8d49f7fdf9700017d780f/59b8d57a646143000180fcca_sygnal-logo-small.png') no-repeat left center; padding-left: 20px;\");\n\n    (new Site()).init(); \n    \n    await (new TimelyService()).init();\n\n    var routeDispatcher = new RouteDispatcher();\n    routeDispatcher.routes = {\n        '/': () => {\n\n            // No special code\n\n        },\n        '/services/*': () => {\n\n            (new ServicesPage()).init();\n\n        },\n        '/clinics/*': () => {\n\n            (new ClinicPage()).init();\n\n        },\n\n    };\n    routeDispatcher.dispatchRoute(); \n\n}\n\ndocument.addEventListener(\"DOMContentLoaded\", init)"],
  "mappings": "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",
  "names": []
}
