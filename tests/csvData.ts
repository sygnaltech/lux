// import fetch from 'node-fetch';
import { parse } from 'csv-parse/sync';

async function fetchCSVData(url: string) {
//   const response = await fetch(url);
//   const text = await response.text();

// console.log(text); 

const text = `
LMP,LMP280,EDD,EDDtoLMP,DayOf,WeekOf
2024-02-21,2024-11-27,2024-11-28,2024-02-22,116,17
2024-02-21,2024-11-27,2024-11-28,2024-02-22,116,17
2024-01-23,2024-10-29,2024-10-30,2024-01-24,145,21
2023-07-26,2024-05-01,2024-05-03,2023-07-28,326,47
2024-05-13,2025-02-17,2025-02-20,2024-05-16,34,5
2023-08-24,2024-05-30,2024-05-31,2023-08-25,297,43
2023-11-08,2024-08-14,2024-08-15,2023-11-09,221,32
2023-10-08,2024-07-14,2024-07-15,2023-10-09,252,37
2023-11-05,2024-08-11,2024-08-12,2023-11-06,224,33
2024-01-02,2024-10-08,2024-10-09,2024-01-03,166,24
2023-10-13,2024-07-19,2024-07-20,2023-10-14,247,36
2023-11-29,2024-09-04,2024-09-05,2023-11-30,200,29
2023-12-24,2024-09-29,2024-10-01,2023-12-26,175,26
2024-03-08,2024-12-13,2024-12-15,2024-03-10,100,15
2024-03-01,2024-12-06,2024-12-08,2024-03-03,107,16
2024-01-05,2024-10-11,2024-10-12,2024-01-06,163,24
2023-11-13,2024-08-19,2024-08-20,2023-11-14,216,31
2024-01-16,2024-10-22,2024-10-23,2024-01-17,152,22
2024-04-05,2025-01-10,2025-01-12,2024-04-07,72,11
2023-12-24,2024-09-29,2024-10-01,2023-12-26,175,26
`.trim();



  const records = parse(text, {
    columns: true,
    skip_empty_lines: true,
  });
  return records;
}

export default fetchCSVData;
